2025-05-09 18:49:29,337 - MCPClient - INFO - Processing query: list tables
2025-05-09 18:49:29,892 - MCPClient - INFO - Executing tool call: query with args: {'sql': 'SHOW TABLES'}
2025-05-09 18:49:29,897 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=e4e8112236b54348bc0caa0e38844b51 "HTTP/1.1 202 Accepted"
2025-05-09 18:54:27,395 - MCPClient - INFO - Loading environment variables from /Users/paladugs/workspace/GWDI/CARIS/caris_mcp_hackathon/client/.env
2025-05-09 18:54:27,397 - MCPClient - INFO - Gemini client initialized with model: gemini-2.0-flash
2025-05-09 18:54:27,397 - MCPClient - INFO - Connecting to MCP server via SSE at: http://localhost:8000/sse
2025-05-09 18:54:27,402 - mcp.client.sse - INFO - Connecting to SSE endpoint: http://localhost:8000/sse
2025-05-09 18:54:27,507 - httpx - INFO - HTTP Request: GET http://localhost:8000/sse "HTTP/1.1 200 OK"
2025-05-09 18:54:27,508 - mcp.client.sse - INFO - Received endpoint URL: http://localhost:8000/messages/?session_id=116f811fc79543b1b60fb793f187f65d
2025-05-09 18:54:27,508 - mcp.client.sse - INFO - Starting post writer with endpoint URL: http://localhost:8000/messages/?session_id=116f811fc79543b1b60fb793f187f65d
2025-05-09 18:54:27,514 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=116f811fc79543b1b60fb793f187f65d "HTTP/1.1 202 Accepted"
2025-05-09 18:54:27,518 - MCPClient - INFO - Refreshing available tools from MCP server
2025-05-09 18:54:27,521 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=116f811fc79543b1b60fb793f187f65d "HTTP/1.1 202 Accepted"
2025-05-09 18:54:27,524 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=116f811fc79543b1b60fb793f187f65d "HTTP/1.1 202 Accepted"
2025-05-09 18:54:27,527 - MCPClient - INFO - Found 3 tools: get_table_schema, query, resolve_resource
2025-05-09 18:54:32,128 - MCPClient - INFO - Processing query: list tables
2025-05-09 18:54:32,128 - MCPClient - INFO - Available tools: [{'type': 'function', 'function': {'name': 'get_table_schema', 'description': '', 'parameters': {'properties': {'table_name': {'title': 'Table Name', 'type': 'string'}}, 'required': ['table_name'], 'title': 'get_table_schemaArguments', 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'query', 'description': '', 'parameters': {'properties': {'sql': {'title': 'Sql', 'type': 'string'}}, 'required': ['sql'], 'title': 'queryArguments', 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'resolve_resource', 'description': '', 'parameters': {'properties': {'uri': {'title': 'Uri', 'type': 'string'}}, 'required': ['uri'], 'title': 'resolve_resourceArguments', 'type': 'object'}}}]
2025-05-09 18:54:32,129 - MCPClient - INFO - Tool descriptions: - get_table_schema(table_name: {'title': 'Table Name', 'type': 'string'})
- query(sql: {'title': 'Sql', 'type': 'string'})
- resolve_resource(uri: {'title': 'Uri', 'type': 'string'})
2025-05-09 18:54:32,129 - MCPClient - INFO - Sending request to Gemini with 3 tools available
2025-05-09 18:54:32,994 - MCPClient - INFO - Executing tool call: query with args: {'sql': 'SHOW TABLES'}
2025-05-09 18:54:33,001 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=116f811fc79543b1b60fb793f187f65d "HTTP/1.1 202 Accepted"
2025-05-09 18:56:24,495 - MCPClient - INFO - Loading environment variables from /Users/paladugs/workspace/GWDI/CARIS/caris_mcp_hackathon/client/.env
2025-05-09 18:56:24,496 - MCPClient - INFO - Gemini client initialized with model: gemini-2.0-flash
2025-05-09 18:56:24,497 - MCPClient - INFO - Connecting to MCP server via SSE at: http://localhost:8000/sse
2025-05-09 18:56:24,502 - mcp.client.sse - INFO - Connecting to SSE endpoint: http://localhost:8000/sse
2025-05-09 18:56:24,595 - httpx - INFO - HTTP Request: GET http://localhost:8000/sse "HTTP/1.1 200 OK"
2025-05-09 18:56:24,595 - mcp.client.sse - INFO - Received endpoint URL: http://localhost:8000/messages/?session_id=301d78f4de154a639a5b21cee426ac59
2025-05-09 18:56:24,596 - mcp.client.sse - INFO - Starting post writer with endpoint URL: http://localhost:8000/messages/?session_id=301d78f4de154a639a5b21cee426ac59
2025-05-09 18:56:24,600 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=301d78f4de154a639a5b21cee426ac59 "HTTP/1.1 202 Accepted"
2025-05-09 18:56:24,602 - MCPClient - INFO - Refreshing available tools from MCP server
2025-05-09 18:56:24,606 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=301d78f4de154a639a5b21cee426ac59 "HTTP/1.1 202 Accepted"
2025-05-09 18:56:24,609 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=301d78f4de154a639a5b21cee426ac59 "HTTP/1.1 202 Accepted"
2025-05-09 18:56:24,612 - MCPClient - INFO - Found 3 tools: get_table_schema, query, resolve_resource
2025-05-09 18:56:28,856 - MCPClient - INFO - Processing query: list tables
2025-05-09 18:56:28,857 - MCPClient - INFO - Available tools: [{'type': 'function', 'function': {'name': 'get_table_schema', 'description': '', 'parameters': {'properties': {'table_name': {'title': 'Table Name', 'type': 'string'}}, 'required': ['table_name'], 'title': 'get_table_schemaArguments', 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'query', 'description': '', 'parameters': {'properties': {'sql': {'title': 'Sql', 'type': 'string'}}, 'required': ['sql'], 'title': 'queryArguments', 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'resolve_resource', 'description': '', 'parameters': {'properties': {'uri': {'title': 'Uri', 'type': 'string'}}, 'required': ['uri'], 'title': 'resolve_resourceArguments', 'type': 'object'}}}]
2025-05-09 18:56:28,857 - MCPClient - INFO - Tool descriptions: - get_table_schema(table_name: {'title': 'Table Name', 'type': 'string'})
- query(sql: {'title': 'Sql', 'type': 'string'})
- resolve_resource(uri: {'title': 'Uri', 'type': 'string'})
2025-05-09 18:56:28,857 - MCPClient - INFO - Sending request to Gemini with 3 tools available
2025-05-09 18:56:29,671 - MCPClient - INFO - Gemini raw response: {
    "tool": "query",
    "args": {
        "sql": "SHOW TABLES"
    }
}
2025-05-09 18:56:29,671 - MCPClient - INFO - Executing tool call: query with args: {'sql': 'SHOW TABLES'}
2025-05-09 18:56:29,678 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=301d78f4de154a639a5b21cee426ac59 "HTTP/1.1 202 Accepted"
2025-05-09 19:10:51,230 - MCPClient - INFO - Loading environment variables from /Users/paladugs/workspace/GWDI/CARIS/caris_mcp_hackathon/client/.env
2025-05-09 19:10:51,232 - MCPClient - INFO - Gemini client initialized with model: gemini-2.0-flash
2025-05-09 19:10:51,232 - MCPClient - INFO - Connecting to MCP server via SSE at: http://localhost:8000/sse
2025-05-09 19:10:51,238 - mcp.client.sse - INFO - Connecting to SSE endpoint: http://localhost:8000/sse
2025-05-09 19:10:51,346 - httpx - INFO - HTTP Request: GET http://localhost:8000/sse "HTTP/1.1 200 OK"
2025-05-09 19:10:51,347 - mcp.client.sse - INFO - Received endpoint URL: http://localhost:8000/messages/?session_id=078aae57f8794e90ac55e94a29626145
2025-05-09 19:10:51,347 - mcp.client.sse - INFO - Starting post writer with endpoint URL: http://localhost:8000/messages/?session_id=078aae57f8794e90ac55e94a29626145
2025-05-09 19:10:51,353 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=078aae57f8794e90ac55e94a29626145 "HTTP/1.1 202 Accepted"
2025-05-09 19:10:51,358 - MCPClient - INFO - Refreshing available tools from MCP server
2025-05-09 19:10:51,360 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=078aae57f8794e90ac55e94a29626145 "HTTP/1.1 202 Accepted"
2025-05-09 19:10:51,363 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=078aae57f8794e90ac55e94a29626145 "HTTP/1.1 202 Accepted"
2025-05-09 19:10:54,631 - MCPClient - INFO - Processing query: list tables
2025-05-09 19:10:54,632 - MCPClient - INFO - Refreshing available resources from MCP server
2025-05-09 19:10:54,636 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=078aae57f8794e90ac55e94a29626145 "HTTP/1.1 202 Accepted"
2025-05-09 19:10:54,671 - MCPClient - INFO - Sending prompt to Gemini
2025-05-09 19:10:55,517 - MCPClient - INFO - Gemini raw response: ```json
{
  "tool": "resolve_resource",
  "args": {
    "uri": "redshift://tables"
  }
}
```
2025-05-09 19:10:55,517 - MCPClient - ERROR - Invalid JSON in Gemini response: Expecting value: line 1 column 1 (char 0)
2025-05-09 19:13:40,080 - MCPClient - INFO - Loading environment variables from /Users/paladugs/workspace/GWDI/CARIS/caris_mcp_hackathon/client/.env
2025-05-09 19:13:40,083 - MCPClient - INFO - Gemini client initialized with model: gemini-2.0-flash
2025-05-09 19:13:40,083 - MCPClient - INFO - Connecting to MCP server via SSE at: http://localhost:8000/sse
2025-05-09 19:13:40,088 - mcp.client.sse - INFO - Connecting to SSE endpoint: http://localhost:8000/sse
2025-05-09 19:13:40,204 - httpx - INFO - HTTP Request: GET http://localhost:8000/sse "HTTP/1.1 200 OK"
2025-05-09 19:13:40,205 - mcp.client.sse - INFO - Received endpoint URL: http://localhost:8000/messages/?session_id=ebc8b05eedfb4bc9863717cad0ae53c9
2025-05-09 19:13:40,205 - mcp.client.sse - INFO - Starting post writer with endpoint URL: http://localhost:8000/messages/?session_id=ebc8b05eedfb4bc9863717cad0ae53c9
2025-05-09 19:13:40,212 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=ebc8b05eedfb4bc9863717cad0ae53c9 "HTTP/1.1 202 Accepted"
2025-05-09 19:13:40,218 - MCPClient - INFO - Refreshing available tools from MCP server
2025-05-09 19:13:40,222 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=ebc8b05eedfb4bc9863717cad0ae53c9 "HTTP/1.1 202 Accepted"
2025-05-09 19:13:40,227 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=ebc8b05eedfb4bc9863717cad0ae53c9 "HTTP/1.1 202 Accepted"
2025-05-09 19:13:44,763 - MCPClient - INFO - Processing query: list tables
2025-05-09 19:13:44,763 - MCPClient - INFO - Refreshing available resources from MCP server
2025-05-09 19:13:44,767 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=ebc8b05eedfb4bc9863717cad0ae53c9 "HTTP/1.1 202 Accepted"
2025-05-09 19:13:44,771 - MCPClient - INFO - Sending prompt to Gemini
2025-05-09 19:13:45,704 - MCPClient - INFO - Gemini raw response: ```json
{
  "tool": "resolve_resource",
  "args": {
    "uri": "redshift://tables"
  }
}
```
2025-05-09 19:13:45,705 - MCPClient - INFO - Sanitized Gemini response: {
  "tool": "resolve_resource",
  "args": {
    "uri": "redshift://tables"
  }
}
2025-05-09 19:13:45,705 - MCPClient - INFO - Executing tool call: resolve_resource with args: {'uri': 'redshift://tables'}
2025-05-09 19:13:45,711 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=ebc8b05eedfb4bc9863717cad0ae53c9 "HTTP/1.1 202 Accepted"
2025-05-09 19:16:35,379 - MCPClient - INFO - Loading environment variables from /Users/paladugs/workspace/GWDI/CARIS/caris_mcp_hackathon/client/.env
2025-05-09 19:16:35,380 - MCPClient - INFO - Gemini client initialized with model: gemini-2.0-flash
2025-05-09 19:16:35,380 - MCPClient - INFO - Connecting to MCP server via SSE at: http://localhost:8000/sse
2025-05-09 19:16:35,385 - mcp.client.sse - INFO - Connecting to SSE endpoint: http://localhost:8000/sse
2025-05-09 19:16:35,476 - httpx - INFO - HTTP Request: GET http://localhost:8000/sse "HTTP/1.1 200 OK"
2025-05-09 19:16:35,476 - mcp.client.sse - INFO - Received endpoint URL: http://localhost:8000/messages/?session_id=d1d5be5d6c0b4eb38a83185785dd061a
2025-05-09 19:16:35,477 - mcp.client.sse - INFO - Starting post writer with endpoint URL: http://localhost:8000/messages/?session_id=d1d5be5d6c0b4eb38a83185785dd061a
2025-05-09 19:16:35,481 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=d1d5be5d6c0b4eb38a83185785dd061a "HTTP/1.1 202 Accepted"
2025-05-09 19:16:35,484 - MCPClient - INFO - Refreshing available tools from MCP server
2025-05-09 19:16:35,487 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=d1d5be5d6c0b4eb38a83185785dd061a "HTTP/1.1 202 Accepted"
2025-05-09 19:16:35,490 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=d1d5be5d6c0b4eb38a83185785dd061a "HTTP/1.1 202 Accepted"
2025-05-09 19:16:39,694 - MCPClient - INFO - Processing query: list tables
2025-05-09 19:16:39,695 - MCPClient - INFO - Refreshing available resources from MCP server
2025-05-09 19:16:39,697 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=d1d5be5d6c0b4eb38a83185785dd061a "HTTP/1.1 202 Accepted"
2025-05-09 19:16:39,699 - MCPClient - INFO - Sending prompt to Gemini
2025-05-09 19:16:40,605 - MCPClient - INFO - Gemini raw response: ```json
{
  "tool": "resolve_resource",
  "args": {
    "uri": "redshift://tables"
  }
}
```
2025-05-09 19:16:40,605 - MCPClient - INFO - Sanitized Gemini response: {
  "tool": "resolve_resource",
  "args": {
    "uri": "redshift://tables"
  }
}
2025-05-09 19:16:40,605 - MCPClient - INFO - Executing tool call: resolve_resource with args: {'uri': 'redshift://tables'}
2025-05-09 19:16:40,608 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=d1d5be5d6c0b4eb38a83185785dd061a "HTTP/1.1 202 Accepted"
2025-05-09 19:17:09,761 - MCPClient - INFO - Processing query: describe demographics
2025-05-09 19:17:09,761 - MCPClient - INFO - Refreshing available resources from MCP server
2025-05-09 19:17:09,766 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=d1d5be5d6c0b4eb38a83185785dd061a "HTTP/1.1 202 Accepted"
2025-05-09 19:17:09,767 - MCPClient - INFO - Sending prompt to Gemini
2025-05-09 19:17:10,402 - MCPClient - INFO - Gemini raw response: ```json
{
  "tool": "query",
  "args": {
    "sql": "SELECT column_name, data_type FROM information_schema.columns WHERE table_name = 'demographics';"
  }
}
```
2025-05-09 19:17:10,402 - MCPClient - INFO - Sanitized Gemini response: {
  "tool": "query",
  "args": {
    "sql": "SELECT column_name, data_type FROM information_schema.columns WHERE table_name = 'demographics';"
  }
}
2025-05-09 19:17:10,402 - MCPClient - INFO - Executing tool call: query with args: {'sql': "SELECT column_name, data_type FROM information_schema.columns WHERE table_name = 'demographics';"}
2025-05-09 19:17:10,405 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=d1d5be5d6c0b4eb38a83185785dd061a "HTTP/1.1 202 Accepted"
2025-05-09 19:17:20,981 - MCPClient - INFO - Processing query: describe ecog
2025-05-09 19:17:20,981 - MCPClient - INFO - Refreshing available resources from MCP server
2025-05-09 19:17:20,992 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=d1d5be5d6c0b4eb38a83185785dd061a "HTTP/1.1 202 Accepted"
2025-05-09 19:17:20,994 - MCPClient - INFO - Sending prompt to Gemini
2025-05-09 19:17:21,601 - MCPClient - INFO - Gemini raw response: ```json
{
  "tool": "get_table_schema",
  "args": {
    "table_name": "ecog"
  }
}
```
2025-05-09 19:17:21,601 - MCPClient - INFO - Sanitized Gemini response: {
  "tool": "get_table_schema",
  "args": {
    "table_name": "ecog"
  }
}
2025-05-09 19:17:21,601 - MCPClient - INFO - Executing tool call: get_table_schema with args: {'table_name': 'ecog'}
2025-05-09 19:17:21,605 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=d1d5be5d6c0b4eb38a83185785dd061a "HTTP/1.1 202 Accepted"
2025-05-09 19:17:35,158 - MCPClient - INFO - Processing query: fetch 10 rows from ecog
2025-05-09 19:17:35,159 - MCPClient - INFO - Refreshing available resources from MCP server
2025-05-09 19:17:35,163 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=d1d5be5d6c0b4eb38a83185785dd061a "HTTP/1.1 202 Accepted"
2025-05-09 19:17:35,165 - MCPClient - INFO - Sending prompt to Gemini
2025-05-09 19:17:35,798 - MCPClient - INFO - Gemini raw response: ```json
{
  "tool": "query",
  "args": {
    "sql": "SELECT * FROM ecog LIMIT 10;"
  }
}
```
2025-05-09 19:17:35,798 - MCPClient - INFO - Sanitized Gemini response: {
  "tool": "query",
  "args": {
    "sql": "SELECT * FROM ecog LIMIT 10;"
  }
}
2025-05-09 19:17:35,798 - MCPClient - INFO - Executing tool call: query with args: {'sql': 'SELECT * FROM ecog LIMIT 10;'}
2025-05-09 19:17:35,801 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=d1d5be5d6c0b4eb38a83185785dd061a "HTTP/1.1 202 Accepted"
